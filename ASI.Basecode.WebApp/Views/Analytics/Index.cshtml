@model ASI.Basecode.Services.ServiceModels.AnalyticsViewModel

@{
    ViewBag.Title = "Analytics";
}

<h2>Analytics</h2>

<div class="row">
    <div class="col-md-12">
        <h3>Room Usage Over Time</h3>
        <div id="roomUsageChart"></div>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        Highcharts.chart('roomUsageChart', {
            chart: {
                type: 'area'
            },
            title: {
                text: 'Weekly Room Usage (Total Hours)'
            },
            xAxis: {
                categories: @Html.Raw(Json.Serialize(Model.WeeklyRoomUsage.FirstOrDefault()?.Weeks ?? new List<string>())),
                title: {
                    text: 'Weeks'
                }
            },
            yAxis: {
                title: {
                    text: 'Total Usage Hours'
                }
            },
            series: @Html.Raw(Json.Serialize(
         Model.WeeklyRoomUsage.Select(room => new
         {
             name = room.RoomName,
             data = room.WeeklyBookingFrequency
         })
         ))
            });
    });
</script>
