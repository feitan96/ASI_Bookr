@using Microsoft.AspNetCore.Http
@inject IHttpContextAccessor HttpContextAccessor
<header class="@((ViewBag.LoginView == true) ? "hide-navbar" : "")">
    <div class="sidebar-header" style="padding: 20px; display: flex; align-items: center; border-top-right-radius: 10px; border-bottom-right-radius: 10px;">
        <a asp-action="Index" asp-controller="UserRoom" style="display: flex; align-items: center; text-decoration: none;">
            <img src="~/img/bookr_logo_maroon.png" alt="Logo" style="margin-right: 10px;" class="logohead">
            <span style="color: white; font-size: 24px; font-family: Inter; font-weight: 800;">Bookr</span>
        </a>
    </div>

    <div class="logosec">
        @HttpContextAccessor.HttpContext.Session.GetString("Name")
        <div class="mr-20 hover-pointer" style="position: relative;">
            <div class="dp hover-pointer" onclick="toggleDropdown()">
                <svg style="width: 6px; fill: white" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 512"><path d="M64 360a56 56 0 1 0 0 112 56 56 0 1 0 0-112zm0-160a56 56 0 1 0 0 112 56 56 0 1 0 0-112zM120 96A56 56 0 1 0 8 96a56 56 0 1 0 112 0z" />
                </svg>
            </div>
            <div class="dropdown" id="profileDropdown" style="display: none; position: absolute; top: 30px; right: 0; background: white; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); border-radius: 8px; z-index: 10;">
                <ul style="list-style: none; margin: 0; padding: 10px;">
                    <li>
                        <i class="fa-solid fa-gear"></i>
                        <a asp-action="MyBookings" asp-controller="UserRoom" class="sidebar-link">My Bookings</a>
                    </li>
                    <li>
                        <i class="fa-solid fa-book"></i>
                        <a asp-action="Index" asp-controller="UserRoom" class="sidebar-link">Book</a>
                    </li>
                    <li>
                        <i class="fa-solid fa-user-cog"></i>
                        <a asp-action="Index" asp-controller="Profile" class="sidebar-link">Settings</a>
                    </li>
                    <li>
                        <i class="fa-solid fa-right-from-bracket"></i>
                        <a asp-action="SignOutUser" asp-controller="Account">Logout</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</header>

<style>
    header {
        background: -webkit-linear-gradient(180deg, #1C0000 0%, #310000 25%, #4F0000 60%, #820000 83%);
        color: white;
    }
    .logohead {
        margin-top: -10px;
        height: 40px;
        -webkit-filter: drop-shadow(2px 2px 2px #222);
        filter: drop-shadow(2px 2px 2px #222);
    }
</style>

<script>
    function toggleDropdown() {
        const dropdown = document.getElementById('profileDropdown');
        dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
    }

    // Close dropdown when clicking outside
    document.addEventListener('click', (event) => {
        const dropdown = document.getElementById('profileDropdown');
        if (!dropdown.contains(event.target) && !event.target.closest('.dp')) {
            dropdown.style.display = 'none';
        }
    });
</script>

